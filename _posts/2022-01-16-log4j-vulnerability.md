---
layout: post
title: "Spring Boot log4j vulnerability 확인 및 변경"
tags: [Spring Boot, log4j, gradle, GIST 청원, Java]
date: 2022-01-16 23:51:00 +0900
categories: [Development, Spring Boot]

---



Log4j 이슈로 인해 우리 프로젝트에서 log4j를 버전을 확인해봤는데 2.14.1 버전을 사용하고 있었다. 이는 Intellij에서 External Library에서 확인할 수 있다. 

<img src="https://user-images.githubusercontent.com/70755947/149658924-badea737-4505-4afd-a455-abfac82ebc73.png">

log4j 2.14.1 버전은 CVE-2021-44228 에서 나와있듯, 보안취약점에 영향을 받는 버전이다. 다음 사진에서 나와있듯, 2.15.0 버전으로 변경해야 한다. 

<img src="https://user-images.githubusercontent.com/70755947/149658976-1923944b-1fa9-47d0-8f7c-253a8b3d8153.png">

하지만 CVE-2021-44832 에서 2022년 1월 16일 기준으로 log4j에 대한 보안 취약점이 Java8 이상을 기준으로 2.17.0 버전까지 발견됐다. 관련해서는 다음 사진에 나와있다. 

<img width="1054" alt="3" src="https://user-images.githubusercontent.com/70755947/149659049-259db131-ca93-4f0d-9a47-8ad4b491f11a.png">



**따라서 우리 프로젝트는 Java11을 사용하기 때문에 log4j 2.17.1로 변경했다. gradle(build.gradle)에서 사용하는 log4j에 대한  dependency를 다음과 같이 추가하면 된다.**

`implementation 'org.apache.logging.log4j:log4j-to-slf4j:2.17.1'`

`implementation 'org.apache.logging.log4j:log4j-api:2.17.1'`

<img src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-02-20-21%3A04%3A29.png">

<img src="https://user-images.githubusercontent.com/70755947/149659008-0c10b811-1613-48dd-9c7b-2396e13fcdac.png">



구체적인 것은 다음 PR에서 확인할 수 있습니다.

https://github.com/GIST-Petition-Site-Project/GIST-petition-server/pull/167
