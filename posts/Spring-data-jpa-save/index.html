<!DOCTYPE html><html lang="ko" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="[Spring] spring data jpa에서 save 내부 원리" /><meta property="og:locale" content="ko" /><meta name="description" content="문제" /><meta property="og:description" content="문제" /><link rel="canonical" href="https://choieungi.github.io/posts/Spring-data-jpa-save/" /><meta property="og:url" content="https://choieungi.github.io/posts/Spring-data-jpa-save/" /><meta property="og:site_name" content="Ruggy Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-24T17:32:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Spring] spring data jpa에서 save 내부 원리" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-08-24T17:42:37+09:00","datePublished":"2022-08-24T17:32:00+09:00","description":"문제","headline":"[Spring] spring data jpa에서 save 내부 원리","mainEntityOfPage":{"@type":"WebPage","@id":"https://choieungi.github.io/posts/Spring-data-jpa-save/"},"url":"https://choieungi.github.io/posts/Spring-data-jpa-save/"}</script><title>[Spring] spring data jpa에서 save 내부 원리 | Ruggy Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Ruggy Blog"><meta name="application-name" content="Ruggy Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://avatars.githubusercontent.com/u/70755947?v=4 " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Ruggy Blog</a></div><div class="site-subtitle font-italic">Growth Process as Developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/choieungi" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/eungi-choi-a8565620b" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['choieungi','gm.gist.ac.kr'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Spring] spring data jpa에서 save 내부 원리</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Spring] spring data jpa에서 save 내부 원리</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/Choieungi">Eungi, Choi</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1661329920" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-08-24 </em> </span> <span> Updated <em class="timeago" data-ts="1661330557" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-08-24 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="934 words"> <em>5 min</em> read</span></div></div></div><div class="post-content"><h2 id="문제"><span class="mr-2">문제</span><a href="#문제" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">retrieveInboxAllLettersTest</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Letter</span> <span class="n">letter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Letter</span><span class="o">(</span><span class="s">"content"</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
        <span class="n">letter</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">user1</span><span class="o">);</span>
        <span class="n">letterRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">letter</span><span class="o">);</span>
        <span class="n">letterRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">letter</span><span class="o">);</span>
        <span class="n">letterRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">letter</span><span class="o">);</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">InboxLetterResponse</span><span class="o">&gt;</span> <span class="n">inboxLetterResponses</span> <span class="o">=</span> <span class="n">letterService</span><span class="o">.</span><span class="na">retrieveInboxAllLetters</span><span class="o">(</span><span class="n">user1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">inboxLetterResponses</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>전체 편지를 조회하는 로직에서 3개를 insert한 후 이를 전체 조회해서 size를 비교하는 테스트코드를 작성하던 중 실패했습니다. 결과는 다음과 같이 나왔는데 편지에 대해서 insert쿼리가 1번만 발생한 것으로 보입니다. 실제로 전체 조회 후 size를 조회하면 1개가 나왔습니다.</p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A24%3A00.png" data-proofer-ignore></p><p>기본적으로 save가 identical하게 작동하고, flush를 진행하지 않아 발생한 것으로 유추되었는데 계속 실수가 발생하는 부분이기에 내부 동작 원리를 직접 확인해보겠습니다.</p><h2 id="jparepository의-구조"><span class="mr-2">JpaRepository의 구조</span><a href="#jparepository의-구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>기본적으로 <code class="language-plaintext highlighter-rouge">JpaRepository</code> 는 다음과 같은 구조를 갖고 있습니다. 여기서 save는 <code class="language-plaintext highlighter-rouge">CrudRepository</code> 에서 인터페이스를 제공합니다. 참고로 <code class="language-plaintext highlighter-rouge">PagingAndSortingRepository</code>는 docs에서 나와있듯 <code class="language-plaintext highlighter-rouge">CrudRepository</code> 의 Extension으로, pagination과 sorting을 이용한 조회 method를 제공합니다.</p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A24%3A29.png" data-proofer-ignore></p><h3 id="crudrepository"><span class="mr-2">CrudRepository</span><a href="#crudrepository" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">CrudRepository</code>에서 <code class="language-plaintext highlighter-rouge">save</code>는 다음과 같이 인터페이스를 제공합니다. 여기서 docs의 설명이 굉장히 중요한데, 인스턴스가 변했을 수 있으므로, <strong>저장 작업(insert query)이 <code class="language-plaintext highlighter-rouge">save</code>에서 return된 인스턴스를 사용한다고 되어있습니다</strong>. 제가 겪은 이슈에서는 이 return된 instance가 중복된 것으로 유추할 수 있습니다.</p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A24%3A49.png" data-proofer-ignore></p><p>구현체인 <code class="language-plaintext highlighter-rouge">SimpleJpaRepository</code>로 들어가보면 다음과 같습니다.</p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A25%3A12.png" data-proofer-ignore></p><p>만약 identity가 새로운 entity라면 persist한 후 entity를 리턴하는데, 그렇지 않다면 merge를 진행하게 됩니다. merge를 진행하면 Persistent Context에 객체가 추가되지 않기 때문에 이후에 save가 진행되는 객체가 insert되지 않게됩니다.</p><h3 id="디버깅을-통한-실제-작동-확인"><span class="mr-2">디버깅을 통한 실제 작동 확인</span><a href="#디버깅을-통한-실제-작동-확인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>실제로 문제를 파악하기 위해서 디버깅을 진행해보면. 먼저 save가 실행 지점에 breakpoint를 잡고 이후 내부 동작을 확인하기 위해 Spring-data-jpa의 jar에 들어가서 <code class="language-plaintext highlighter-rouge">SimpleJpaReposiotry</code> 에서 breakpoint를 잡으면 다음과 같습니다.</p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A35%3A20.png" data-proofer-ignore></p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A36%3A20.png" data-proofer-ignore></p><p>디버깅을 실행하면 다음과 같습니다.</p><h3 id="첫-번째-save"><span class="mr-2">첫 번째 <code class="language-plaintext highlighter-rouge"><span class="mr-2">save</code></span><a href="#첫-번째-save" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A26%3A32.png" data-proofer-ignore></p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A26%3A50.png" data-proofer-ignore></p><h3 id="두-번째-save"><span class="mr-2">두 번째 <code class="language-plaintext highlighter-rouge"><span class="mr-2">save</code></span><a href="#두-번째-save" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>두번 째에 대해서는 Persistent Context에 이미 존재하기 때문에 merge를 진행하게 됩니다. 이는 곧 identity가 똑같은 객체가 변경되었을 때 Persistent Context에 적용되고 이후 flush를 진행하면 쿼리가 발생하게 됩니다.</p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A27%3A16.png" data-proofer-ignore></p><p><img data-src="https://raw.githubusercontent.com/ChoiEungi/git-blog-image/upload/2022-08-24-17%3A27%3A32.png" data-proofer-ignore></p><p>뿐만 아니라 해결책으로 <code class="language-plaintext highlighter-rouge">saveAndFlush</code> 를 사용하면 되지 않나? 싶어서 진행했는데도 통과하지 않았습니다. 이는 flush는 Persistent Context를 지우는 것이 아니라, Persistent Context의 내용을 DB에 쿼리를 날려 반영하는 것인 것도 놓쳤던 것 같습니다. 결국에는 identity가 다른 객체를 각각 만들어 save를 진행해 해결할 수 있었습니다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">retrieveInboxAllLettersTest</span><span class="o">()</span> <span class="o">{</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="nc">Letter</span> <span class="n">letter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Letter</span><span class="o">(</span><span class="s">"content"</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
        <span class="n">letter</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">user1</span><span class="o">);</span>
        <span class="n">letterRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">letter</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">InboxLetterResponse</span><span class="o">&gt;</span> <span class="n">inboxLetterResponses</span> <span class="o">=</span> <span class="n">letterService</span><span class="o">.</span><span class="na">retrieveInboxAllLetters</span><span class="o">(</span><span class="n">user1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">inboxLetterResponses</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>굉장히 기본적인 내용인데 생각보다 놓치기 쉬운 부분이기에 글을 작성합니다. JPA에서는 객체의 Identity(객체의 id값)를 통해 새로운 객체임을 구분하고 save메소드에서는 이를 기준으로 insert가 작동하기 때문에 이를 유의해야 할 것 같습니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/spring-boot-development/'>Spring Boot Development</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/development/" class="post-tag no-text-decoration" >Development</a> <a href="/tags/spring-data-jpa/" class="post-tag no-text-decoration" >spring data jpa</a> <a href="/tags/spring/" class="post-tag no-text-decoration" >spring</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Spring] spring data jpa에서 save 내부 원리 - Ruggy Blog&amp;url=https://choieungi.github.io/posts/Spring-data-jpa-save/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Spring] spring data jpa에서 save 내부 원리 - Ruggy Blog&amp;u=https://choieungi.github.io/posts/Spring-data-jpa-save/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://choieungi.github.io/posts/Spring-data-jpa-save/&amp;text=[Spring] spring data jpa에서 save 내부 원리 - Ruggy Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/spring-boot-cahce-error-handling/">Spring Boot에서 CacheManager를 에러 핸들링하는 방법</a><li><a href="/posts/spring-cloud-refresh/">분산 시스템 환경에서 Spring Cloud Bus 없이 Spring Cloud Config 프로퍼티 Refresh하는 방법</a><li><a href="/posts/spring-redis-distributed-lock/">Spring MVC에서 redisson으로 분산락을 구현하는 방법들</a><li><a href="/posts/spring-redis-cache-serialization-exception/">Spring Boot에서 Redis @Cacheable을 사용할 때 주의할 점</a><li><a href="/posts/querydsl-connection-leak/">querydsl의 transform 메서드에서 발생하는 connection leak 현상</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/thinking/">Thinking</a> <a class="post-tag" href="/tags/redis/">Redis</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/development/">Development</a> <a class="post-tag" href="/tags/gist-%EC%B2%AD%EC%9B%90/">GIST 청원</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Choosing-Architecture-for-developer/"><div class="card-body"> <em class="timeago small" data-ts="1660037940" > 2022-08-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Thinking] MSA에 대한 단상</h3><div class="text-muted small"><p> SW 마에스트로 과정에서 너무나도 영광스럽게 조대협 멘토님의 k8s 멘토링을 4회 가량을 듣게 되었다. 오늘이 첫번째 강의였고 들으면서 기술에 대한 깨달음이 꽤나 커서 글을 작성한다. 뿐만 아니라 블로그에 좋은 글을 써야 한다는 강박이 계속되어 지금이라도 작은 글들을 조금씩 써나가는 연습을 해보려 한다. k8s를 배우기 앞서 k8s가 가장 잘 활용될...</p></div></div></a></div><div class="card"> <a href="/posts/spring-boot-cahce-error-handling/"><div class="card-body"> <em class="timeago small" data-ts="1711851720" > 2024-03-31 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spring Boot에서 CacheManager를 에러 핸들링하는 방법</h3><div class="text-muted small"><p> 본 글은 아래 링크의 글의 내용과 이어집니다. https://choieungi.github.io/posts/spring-redis-cache-serialization-exception Spring에서 제공하는 @Cacheable을 이용하면 캐쉬를 AOP 기반으로 쉽게 사용할 수 있습니다. 이전 글에서 다뤘듯, 기본적으로 @Cacheable ...</p></div></div></a></div><div class="card"> <a href="/posts/spring-cloud-refresh/"><div class="card-body"> <em class="timeago small" data-ts="1705821120" > 2024-01-21 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>분산 시스템 환경에서 Spring Cloud Bus 없이 Spring Cloud Config 프로퍼티 Refresh하는 방법</h3><div class="text-muted small"><p> 근래에 요즘 우아한 개발이라는 책을 읽으면서 내용 중에 배포 없이 Spring Cloud Config에서 받아오는 프로퍼티를 변경해 서버에 적용하려는 내용을 접했습니다. 해당 팀은 외부 메시지 플랫폼을 이중화하면서 각 외부 플랫폼 연동에 대한 트래픽 분배를 어플리케이션 실행 중에도 변경할 수 있도록 구현해 단일 장애 지점(SPOF)을 제거하려 했습니...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Choosing-Architecture-for-developer/" class="btn btn-outline-primary" prompt="Older"><p>[Thinking] MSA에 대한 단상</p></a> <a href="/posts/Berkeley-review/" class="btn btn-outline-primary" prompt="Newer"><p>[Thinking] UC Berkeley를 마치며 느낀 부족함 그리고 강점의 중요성</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/Choieungi">Eungi, Choi</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/thinking/">Thinking</a> <a class="post-tag" href="/tags/redis/">Redis</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/development/">Development</a> <a class="post-tag" href="/tags/gist-%EC%B2%AD%EC%9B%90/">GIST 청원</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-3R6NSQ6EMQ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-3R6NSQ6EMQ'); }); </script>
